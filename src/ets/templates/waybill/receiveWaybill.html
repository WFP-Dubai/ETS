{% extends "base_template.html"%}
{%load extra_tags%}
{% load i18n %}
{%block title %}{% trans "Welcome to EPIC eTS" %}{%endblock%}
{%block content %}
 <form action="" method=POST>
{% if form.errors %}
   <span class='error'>{% trans "Review Form, as there is information missing" %}</span>
   {{form.errors}}
{% endif %}
<div>
<table cellpadding="0" cellspacing="0" border="0">
<tr><td>{% trans "Waybill Number:" %}</td><td> {{form.waybillNumber}} {{form.instance.waybillNumber}}</td></tr>
<tr><td>{% trans "Dispatch Location" %}</td><td>{{formset.forms.0.instance.siNo.origin_loc_name}}</td></tr>
<tr><td>{% trans "Recipient Location:" %}</td><td> {{form.recipientLocation}}{{form.instance.recipientLocation}}</td></tr>
<tr><td>{% trans "Consignee:" %}</td><td>{{form.recipientConsingee}}{{form.instance.recipientConsingee}}</td></tr>

<tr><td>&nbsp;</td><td></td></tr>
<tr><td>{% trans "Arrival Date:" %} </td><td>{{form.recipientArrivalDate}}<span class='error'>{%for error in form.recipientArrivalDate.errors%} {{error|escape}}{%endfor%}</span></td></tr>
<tr><td>{% trans "Start Discharge:" %}</td><td>{{form.recipientStartDischargeDate}}<span class='error'>{%for error in form.recipientStartDischargeDate.errors%} {{error|escape}}{%endfor%}</span></td></tr>
<tr><td>{% trans "End Discharge:" %} </td><td>{{form.recipientEndDischargeDate}}<span class='error'>{%for error in form.recipientEndDischargeDate.errors%} {{error|escape}}{%endfor%}</span></td></tr>
<tr><td>{% trans "Distance:" %}</td><td>{{form.recipientDistance}}</td></tr>
</table>
</div>
<br>
<style type="text/css">select{font-size:10px;}</style>
 {{ formset.management_form }}
 <table cellpadding="1" cellspacing="0" border="1" class="x" id="example">
    <thead>
        <tr><th>{% trans "Items" %}</th>
        <th>{% trans "Dispatched" %}<br>{%if formset.forms.0.instance.siNo.is_bulk%}MT{%else%}Units{%endif%}</th>
        <th>{% trans "Good" %}<br>{%if formset.forms.0.instance.siNo.is_bulk%}{% trans "MT" %}{%else%}{% trans "Units" %}{%endif%}</th>
        <th>{% trans "Damaged" %}<br>{%if formset.forms.0.instance.siNo.is_bulk%}{% trans "MT" %}{%else%}{% trans "Units" %}{%endif%}</th>
        <th>{% trans "Lost" %}<br>{%if formset.forms.0.instance.siNo.is_bulk%}{% trans "MT" %}{%else%}{% trans "Units" %}{%endif%}</th><th></th>
        </thead>

    {% for sform in formset.forms %}
       
        <tr>
            <td  valign=top> {{ sform.id }}{{sform.order_item}}</td>
            <td  valign=top  align="right">{{ sform.numberUnitsLoaded }}{{sform.instance.numberUnitsLoaded}}</td>
            <td valign=top>{{ sform.numberUnitsGood }}{% trans "Over Offload:" %}{{sform.overOffloadUnits}}</td>
            <td  valign=top><table ><tr><td>{% trans "Units:" %}</td><td>{{ sform.numberUnitsDamaged}} </td></tr><!--<tr><td>Type:</td><td> {{ sform.unitsDamagedType }} </td></tr>--><tr><td>{% trans "Reason:" %}</td><td>{{ sform.unitsDamagedReason }}</td></tr></table></td>
            <td  valign=top><table><tr><td>{% trans "Units:" %}</td><td>{{ sform.numberUnitsLost }} </td></tr><tr><!--<td>Type:</td><td>{{ sform.unitsLostType }} </td></tr>--><tr><td>{% trans "Reason:" %}</td><td>{{ sform.unitsLostReason }}</td></tr></table></td>
            <td>{%for item in sform%}{% if item.errors %}{% for error in item.errors %}<span class='error'>{{ error|escape }}</span><br/>{% endfor %}{%endif%}{% endfor %}</td>
        </tr>
    {% endfor %}
    </table>

<div>
<br>

<table summary=" ">
<tr><td colspan="3">{% trans "Recipient Remarks:" %}</td><td colspan="3">{{form.recipientRemarks}}</td></tr>

<tr><td>{% trans "Container 1:" %}</td><td>{{form.instance.containerOneNumber}}</td><td>{% trans "Seal:" %} </td><td>{{form.instance.containerOneSealNumber}}</td><td>{% trans "Remarks:" %}</td><td>{{form.containerOneRemarksReciept}}</td></tr>
<tr><td>{% trans "Container 2:" %}</td><td>{{form.instance.containerTwoNumber}}</td><td>{% trans "Seal:" %} </td><td>{{form.instance.containerTwoSealNumber}}</td><td>{% trans "Remarks:" %}</td><td>{{form.containerTwoRemarksReciept}}</td></tr>

</table>

</div>

<input type="submit" value="Save &amp; Print"> {% csrf_token %}
</form>


{%endblock%}
{%block script%}
<script charset="utf-8" type="application/javascript">
$(document).ready(function() {
                $('#id_recipientArrivalDate').datepicker({ dateFormat: 'yy-mm-dd' });
                $('#id_recipientStartDischargeDate').datepicker({ dateFormat: 'yy-mm-dd' });
                $('#id_recipientEndDischargeDate').datepicker({ dateFormat: 'yy-mm-dd' });
                $('#example').dataTable( {
                "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": false,
        "bInfo": false,
        "bAutoWidth": false 
                });
} );
</script>
{%endblock script%}
