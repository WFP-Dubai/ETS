{% load extra_tags %}
{% load i18n %}
<tr>
    <td>
        <table cellpadding="0" cellspacing="0" border="1px"  >
            <thead class="wb_head"><tr><th colspan="2">{% trans "Certification of Commodities Received" %}</th></tr></thead>
            <tr>
                <td><small  style="font-size:x-small;">{% trans "Location:" %}</small>{{ object.recipient_person.warehouse.location }}</td>
                <td ><small style="font-size:x-small;">{% trans "Arrival Date:" %}   </small>{{ object.recipient_arrival_date|date }}</td>
            </tr>
            <tr>
                <td><small style="font-size:x-small;">{% trans "Consignee:" %}</small>{{ object.recipient_person.warehouse.organization }}</td>
                <td ><small style="font-size:x-small;">{% trans "Start Discharge Date:" %}</small> {{ object.recipient_start_discharge_date|date }}</td>
            </tr>
            <tr>
                <td><small style="font-size:x-small;">{% trans "Name:" %} </small>{{ object.recipient_person.name }}</td>
                <td ><small style="font-size:x-small;">{% trans "End Discharge Date:" %}</small>{{ object.recipient_end_discharge_date|date }}</td>
            </tr>
            <tr>
                <td><small style="font-size:x-small;">{% trans "Title:" %} </small>{{ object.recipient_person.title }}</td>
                <td ><small style="font-size:x-small;">{% trans "Distance in KM:" %}</small>{{ object.recipient_distance|floatformat:3 }}</td>
            </tr>
        </table>
    </td>
</tr>
<tr>
  <td>
    <table cellpadding="0" cellspacing="0" border="1px" >
        <thead class="wb_head"><tr><th colspan="11">{% trans "Observations" %}</th></tr></thead>
        <tbody>
        <tr style="font-size:x-small;">
          <td><sup>{% trans "Receipt Condition" %}</sup></td>
          <td colspan="2"><sup>{% trans "Good" %}</sup></td>
          <td colspan="5"><sup>{% trans "Lost or Damaged cargo" %}</sup></td>
          <td colspan="2"><sup>{% trans "Total received" %}</sup></td>
        </tr>
        <tr style="font-size:x-small;">
          <td><sup>{% trans "SI No" %}</sup></td>    
          <td><sup>{% trans "Units" %}</sup></td>    
          <td><sup>{% trans "Net MT " %}</sup></td>    
          <td><sup>{% trans "Units" %}</sup></td>    
          <td><sup>{% trans "Net MT" %}</sup></td>    
          <td><sup >{% trans "(L)oss or (D)amage" %}</sup></td>    
          <td><sup>{% trans "Type (specify)" %}</sup></td>
          <td>{% trans "Reason" %}</td>    
          <td><sup>{% trans "Units" %}</sup></td>    
          <td><sup>{% trans "Net MT" %}</sup></td>
        </tr>
        
        {%for lineitem in object.loading_details.all %}
          <tr style="font-size:small; text-align:right;">
            <td style="text-align:left;"><span>{% trans "ID" %} {{ forloop.counter }}. {{ lineitem.get_coi_code }}</span></td>
            <td>{{ lineitem.number_units_good }}</td>
            <td>{{ lineitem.calculate_net_received_good|floatformat:3}}</td>
            <td style="text-align:center;">
              {% if lineitem.number_units_lost %}
                L:{{ lineitem.number_units_lost|floatformat:3 }}
              {% endif %}
              {% if lineitem.number_units_damaged %}
                {% if lineitem.number_units_lost %}/{% endif %}
                D:{{ lineitem.number_units_damaged|floatformat:3 }}
              {% endif %}
              &nbsp;
            </td>

            <td style="text-align:center;">&nbsp;
              {% if lineitem.number_units_lost %}
                  L:{{ lineitem.calculate_net_received_lost|floatformat:3 }}
              {% endif %}
              {% if lineitem.number_units_damaged %}
                {% if lineitem.number_units_lost %}/{% endif %}
                D:{{ lineitem.calculate_net_received_damaged|floatformat:3 }}
              {% endif %}
            </td>
    
            <td style="text-align:center;">&nbsp;
              {% if lineitem.number_units_lost %}
                L{% if lineitem.number_units_damaged %}/{% endif %}
              {% endif %} 
              {% if lineitem.number_units_damaged %}D{% endif %}
            </td>

            <td style="text-align:left;">&nbsp;<!-- type-->
              {% if lineitem.number_units_lost %}
                <p>L:{{ lineitem.units_lost_type }}</p>
              {% endif %} 
              {% if lineitem.number_units_damaged %}
                <p>D:{{ lineitem.units_damaged_type }}</p> 
              {% endif %}
            </td>
            <td style="text-align:left;">&nbsp;<!--reason-->
              {% if lineitem.number_units_lost %}
                L:{{ lineitem.units_lost_reason|truncatesmart:20 }} 
              {% endif %} 
              {% if lineitem.number_units_damaged %}
                D:{{ lineitem.units_damaged_reason|truncatesmart:20}} 
              {% endif %}
            </td>
            <td>
              {{ lineitem.calculate_total_received_units|floatformat:3 }}
            </td>
            <td>
              {{lineitem.calculate_total_received_net|floatformat:3}}
            </td>    
          </tr>
        {%endfor%}
                                        
        {%for lineitem in extra_lines%}
          <tr  style="font-size:small;">
              <td>{% trans 'ID' %} {{ forloop.counter|add:object.loading_details.count }}.</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
          </tr>
        {% endfor %}

          <tr>
              <td colspan="10">
                <sup>{% trans "Reciptient Remarks" %}:</sup> {{ object.recipient_remarks }}
                {% if object.container_one_remarks_reciept%}
                  <p>{% trans "Container 1 Remarks:" %}{{ object.container_one_remarks_reciept }}</p>
                {%endif%}
                {% if object.container_two_remarks_reciept %}
                  <p>{% trans "Container 2 Remarks:" %}{{ object.container_two_remarks_reciept }}</p>
                {%endif%}
                <br><br>
              </td>
          </tr>
      </tbody>
    </table>
  </td>
</tr>
<tr>
	<td>
		<table cellpadding="0" cellspacing="0" border="1px" >
			<tr>
				<td>
					<p style="font-size: x-small">{% trans "On behalf of the Consignee I hereby certify receipt of the commodities loaded, unless endorsed as above." %}</p>
					<p style="font-size: x-small">{% trans "Name, signature and stamp:" %}</p>
				  {% if object.recipient_signed_date %}
            <p style='font-size:14px'>{{ object.recipient_person }}</p>
            <p>{% trans "Date:" %}{{ object.recipient_signed_date }}</p>
          {% endif %}
					
		      <p style="font-size: x-small">{% trans "Endorse this section with an official stamp" %}</p>
			  </td>
		    <td>
          <p style="font-size: x-small">{% trans "On behalf of the Transport Contractor I hereby certify delivery of the commodities loaded, unless endorsed as above." %}</p>
          <p style="font-size: x-small">{% trans "Name, signature and stamp" %}</p>
	        {% if object.recipient_signed_date %}
				  <p style='font-size:14px'>{{ object.transport_driver_name|upper}}</p>
          <p>{% trans "Date:" %} {{ object.recipient_signed_date }}</p>
          {%endif%}
					<p style="font-size: x-small">{% trans "Endorse this section with an official stamp" %}</p>
				</td>
			</tr>
		</table>
	</td>
</tr>
